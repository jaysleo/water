(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/library/order/index"],{"29ae":function(t,n,e){},3972:function(t,n,e){"use strict";e.r(n);var a=e("969e"),o=e("db7a");for(var r in o)"default"!==r&&function(t){e.d(n,t,(function(){return o[t]}))}(r);e("554a");var i,u=e("f0c5"),s=Object(u["a"])(o["default"],a["b"],a["c"],!1,null,"5972131f",null,!1,a["a"],i);n["default"]=s.exports},"554a":function(t,n,e){"use strict";var a=e("29ae"),o=e.n(a);o.a},6381:function(t,n,e){"use strict";(function(t){e("f4e9");a(e("66fd"));var n=a(e("3972"));function a(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},"969e":function(t,n,e){"use strict";e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return r})),e.d(n,"a",(function(){return a}));var a={uGap:function(){return e.e("uview-ui/components/u-gap/u-gap").then(e.bind(null,"0706"))}},o=function(){var t=this,n=t.$createElement,e=(t._self._c,0!=t.list.length?t.__map(t.list,(function(n,e){var a=t.__get_orig(n),o=1==n.status?t._f("orderStatus")(n.status):null,r=2==n.status?t._f("orderStatus")(n.status):null,i=5==n.status?t._f("orderStatus")(n.status):null,u=4==n.status?t._f("orderStatus")(n.status):null;return{$orig:a,f0:o,f1:r,f2:i,f3:u}})):null);t.$mp.data=Object.assign({},{$root:{l0:e}})},r=[]},aa0b:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=o(e("a34a"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t,n,e,a,o,r,i){try{var u=t[r](i),s=u.value}catch(c){return void e(c)}u.done?n(s):Promise.resolve(s).then(a,o)}function i(t){return function(){var n=this,e=arguments;return new Promise((function(a,o){var i=t.apply(n,e);function u(t){r(i,a,o,u,s,"next",t)}function s(t){r(i,a,o,u,s,"throw",t)}u(void 0)}))}}var u=function(){e.e("components/loadmore").then(function(){return resolve(e("f1bc"))}.bind(null,e)).catch(e.oe)},s=function(){e.e("pages/library/components/pay").then(function(){return resolve(e("d484"))}.bind(null,e)).catch(e.oe)},c={components:{loadMore:u,"v-pay":s},data:function(){return{tablist:[{id:1,name:"待付款"},{id:2,name:"待发货"},{id:3,name:"待收货"},{id:4,name:"待评价"}],current:1,list:[],status:"loading",page:1,loadShow:!1,totals:"0",payshow:!1,orderid:0,ostatus:""}},filters:{orderStatus:function(t){switch(t){case 1:return"待付款";case 2:return"已付款";case 3:return"已发货";case 4:return"待评价";case 5:return"已取消";default:return"待确认"}}},methods:{tabchange:function(t){this.current=t,this.page=1,this.list=[],this.loadData()},loadData:function(){var n=this;return i(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(4!=n.current){e.next=4;break}return e.next=3,n.$api.http.waitCommit(n.page,10).then((function(e){if(200==e.code){var a=0,o=0,r=e.data.data.map((function(t){return t.product_arr.map((function(t){a+=t.buy_number*parseFloat(t.total_price),o=t.product_id})),t.proid=o,t.price=a.toFixed(2),t}));n.list=n.list.concat(r);var i=e.data.total;e.data.data.length<=i&&1==n.page&&(n.status="nomore",n.loadShow=!1),0==e.data.data.length&&(n.status="nomore",n.loadShow=!1)}else 402==e.code&&t.navigateTo({url:"/pages/login/index"})}));case 3:return e.abrupt("return",!1);case 4:return e.next=6,n.$api.http.orderList(n.current,n.page,10).then((function(e){if(200==e.code){var a=0,o=0,r=e.data.data.map((function(t){return t.product_arr.map((function(t){a+=t.buy_number*parseFloat(t.total_price),o=t.product_id})),t.proid=o,t.price=a.toFixed(2),t}));n.list=n.list.concat(r);var i=e.data.total;e.data.data.length<=i&&1==n.page&&(n.status="nomore",n.loadShow=!1),0==e.data.data.length&&(n.status="nomore",n.loadShow=!1)}else 402==e.code&&t.navigateTo({url:"/pages/login/index"})}));case 6:case"end":return e.stop()}}),e)})))()},delOrder:function(n,e){var a=this;t.showModal({title:"提示",content:"是否确认删除该订单？",confirmColor:"#19BEF4",success:function(o){o.confirm?a.$api.http.delOrder(n).then((function(n){200==n.code?a.list.splice(e,1):t.showToast({title:n.message,icon:"none"})})):o.cancel&&console.log("用户点击取消")}})},onDeliver:function(n,e){var a=this;t.showModal({title:"提示",content:"是否确认收货？",confirmColor:"#19BEF4",success:function(o){o.confirm?a.$api.http.deliver(n).then((function(n){200==n.code?a.list.splice(e,1):t.showToast({title:n.message,icon:"none"})})):o.cancel&&console.log("用户点击取消")}})},onCommit:function(n,e){t.navigateTo({url:"/pages/library/order/comment?id="+n+"&pid="+e})},close:function(){this.payshow=!1},onPay:function(t,n){this.payshow=!0,this.totals=n,this.orderid=t}},onShow:function(){this.page=1,this.list=[],this.loadData()},onReachBottom:function(){"nomore"!=this.status&&(this.loadShow=!0,this.status="loading",this.page++,this.loadData())},onPullDownRefresh:function(){t.stopPullDownRefresh(),this.list=[],this.page=1,this.loadData()}};n.default=c}).call(this,e("543d")["default"])},db7a:function(t,n,e){"use strict";e.r(n);var a=e("aa0b"),o=e.n(a);for(var r in a)"default"!==r&&function(t){e.d(n,t,(function(){return a[t]}))}(r);n["default"]=o.a}},[["6381","common/runtime","common/vendor"]]]);